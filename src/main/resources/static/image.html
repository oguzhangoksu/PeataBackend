<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Upload with JSON</title>
</head>
<body>
    <h1>Upload Images with JSON Data</h1>
    <form id="uploadForm">
        <input type="file" id="fileInput" accept="image/*" multiple />
        <input type="text" id="animal_name" placeholder="animal_name" />
        <input type="text" id="age" placeholder="age" />
        <input type="text" id="breed" placeholder="breed" />
        <input type="text" id="type" placeholder="type" />
        <input type="text" id="gender" placeholder="gender" />
        <input type="text" id="description" placeholder="description" />
        <input type="text" id="city" placeholder="city" />
        <input type="text" id="district" placeholder="district" />
        <input type="text" id="add_type" placeholder="add_type" />
        <input type="number" id="user_id" placeholder="user_id" />
 
        <button type="submit">Upload</button>
    </form>
    <script >
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const fileInput = document.getElementById('fileInput');
            const animal_nameInput = document.getElementById('animal_name');
            const ageInput = document.getElementById('age');
            const breedInput = document.getElementById('breed');
            const typeInput = document.getElementById('type');
            const genderInput = document.getElementById('gender');
            const descriptionInput = document.getElementById('description');
            const cityInput = document.getElementById('city');
            const districtInput = document.getElementById('district');
            const add_typeInput = document.getElementById('add_type');
            const user_idInput = document.getElementById('user_id');

            const files = fileInput.files;
            console.log('Selected files:', files);
            if (files.length > 0) {
                const formData = new FormData();
                
                // Append images to FormData
                for (const file of files) {
                    formData.append('images', file);
                }

                // Append JSON data as a string
                const jsonData = JSON.stringify({
                    animal_name: animal_nameInput.value,
                    age: ageInput.value,
                    breed:breedInput.value,
                    type:typeInput.value,
                    gender:genderInput.value,
                    description:descriptionInput.value,
                    city:cityInput.value,
                    district:districtInput.value,
                    add_type:add_typeInput.value,
                    user_id:user_idInput.value
                    // Add more fields as needed
                });
                formData.append('data', jsonData);

                // Replace 'YOUR_API_ENDPOINT' with your actual API endpoint
                fetch('http://2.59.119.54:8080/add/save', {  // Adjust URL as needed
                    method: 'POST',
                    body: formData,
                })
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    }
                    throw new Error('Network response was not ok.');
                })
                .then(data => {
                    console.log('Success:', data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            } else {
                console.log('No files selected.');
            }
        });


    </script>
</body>
</html>